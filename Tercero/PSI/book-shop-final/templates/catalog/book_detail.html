{% extends 'base.html' %}
{% load static %}
{% block title %}
Book-Detail
{% endblock %}
{% block content %}

<div class="row mt-2">
    <div class="col-sm-4 p-3">
        <img src="{%static 'covers/'%}{{ book.path_to_cover_image }}" alt="Imagen no encontrada" class="img-thumbnail">
    </div>
    <div class="col-sm-8 p-3">
        <h1>Title: {{ book.title }}</h1>
        {% if book.score %}
        <div class="progress mt-4" style="height:20px">
            <div class="progress-bar" style="width:{{ score }}0%;height:20px">Score: {{ book.score }}</div>
        </div>
        {% else %}
        <p class="p-3">This book has not been rated yet</p>
        {% endif %}
        <div class="mt-4 p-3">
            <div class="d-flex w-100 justify-content-between">
                <h5>Authors: </h5>
                <p>{{ book.display_authors }}</p>
            </div>
            <div class="d-flex w-100 justify-content-between">
                <h5>Price: </h5>
                <p class="text-primary">{{ book.price }} $</p>
            </div>
            {% if user.is_authenticated %}
            <div class="mt-4">
                <form class="form-control" action="{% url 'cart_add' slug=pk %}" method="POST">
                    {% csrf_token %}
                    <div class="d-flex w-100 justify-content-between">
                        <div class="d-flex w-25 justify-content-between">
                            <label for="quantity" class="form-label">Select Quantity</label>
                            {{ form_cart.quantity }}
                        </div>
                        <input type="submit" value="Add to Cart" class="btn btn-outline-primary" />
                    </div>
                </form>
            </div>
            <div class="mt-4">
                <form class="form-control" action="{% url 'vote_book' slug=pk %}" method="POST">
                    {% csrf_token %}
                    <div class="d-flex w-100 justify-content-between">
                        <div class="d-flex w-25 justify-content-between">
                            <label for="quantity" class="form-label">Score Book</label>
                            {{ form_vote.score }}
                        </div>
                        <input type="submit" value="Vote" class="btn btn-outline-primary" />
                    </div>
                </form>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<h2 class="mt-4">Comments:</h2>
{% if comments %}
<ul class="list-group">
    {% for comment in comments %}
    <li class="list-group-item mb-1 p-2">
        <p>{{ comment.msg }}</p>
        <div class="d-flex w-100 justify-content-between">
            <h6 class="text-secondary">- from {{ comment.user }}</h6>
            <h6 class="text-secondary">{{ comment.date }}</h6>
        </div>
    </li>
    {% endfor %}
</ul>
{% else %}
<p>The book has no comments</p>
{% endif %}


{% endblock content %}